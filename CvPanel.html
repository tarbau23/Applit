<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Editor - Applit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f6f9fc;
            color: #32325d;
            line-height: 1.6;
        }

        /* Header Styles - Stripe Inspired */
        header {
            background-color: white;
            padding: 16px 0;
            box-shadow: 0 1px 3px rgba(50, 50, 93, 0.15), 0 1px 0 rgba(0, 0, 0, 0.02);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 26px;
            font-weight: 700;
            color: #5865F2;
            letter-spacing: -0.5px;
        }

        .logo svg {
            margin-right: 12px;
        }

        .header-right {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .save-status-header {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #697386;
            font-size: 14px;
            padding: 8px 16px;
            background: #f6f9fc;
            border-radius: 20px;
            font-weight: 500;
        }

        .save-status-header.saved {
            color: #16a34a;
            background: #f0fdf4;
        }

        .help-btn {
            background: transparent;
            border: 2px solid #e3e8ee;
            color: #697386;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.15s;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .help-btn:hover {
            background-color: #f6f9fc;
            color: #32325d;
            border-color: #c9d3e0;
            transform: translateY(-1px);
        }

        /* Editor Container */
        .editor-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 16px 32px 32px;
        }

        /* Progress Section - Enhanced Style */
        .progress-section {
            background: white;
            padding: 20px 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06), 0 2px 8px rgba(0, 0, 0, 0.04);
            position: relative;
            overflow: hidden;
        }

        .progress-section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.02) 0%, rgba(118, 75, 162, 0.02) 100%);
            pointer-events: none;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1;
        }

        .step-circle {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #e3e8ee;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: #aab7c5;
            margin-bottom: 10px;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            transform: scale(1.05);
        }

        .step.completed .step-circle {
            background: linear-gradient(135deg, #20e3b2 0%, #29ffc6 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(32, 227, 178, 0.3);
        }

        .step-label {
            font-size: 14px;
            color: #697386;
            text-align: center;
            font-weight: 600;
            letter-spacing: -0.1px;
        }

        .step.active .step-label {
            color: #32325d;
            font-weight: 700;
        }

        .step.completed .step-label {
            color: #16a34a;
        }

        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 18px;
            left: 60%;
            width: calc(100% - 20px);
            height: 3px;
            background: linear-gradient(90deg, #e3e8ee 0%, #d1d5db 100%);
            z-index: -1;
            transition: all 0.3s;
        }

        .step.completed:not(:last-child)::after {
            background: linear-gradient(90deg, #20e3b2 0%, #29ffc6 100%);
        }

        /* Instructions Card - Enhanced Style */
        .instructions-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%);
            border-radius: 12px;
            padding: 20px 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 24px rgba(99, 91, 255, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(99, 91, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .instructions-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
            background-size: 200% 100%;
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .instructions-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .instructions-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
        }

        .instructions-text h3 {
            font-size: 16px;
            color: #32325d;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .instructions-text p {
            color: #697386;
            font-size: 14px;
            margin: 0;
        }

        /* Two Pane Layout */
        .editor-wrapper {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(50, 50, 93, 0.12), 0 2px 10px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .editor-panes {
            display: flex;
            height: calc(100vh - 400px);
            min-height: 600px;
            position: relative;
        }

        .pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .pane-header {
            padding: 24px 28px;
            background: linear-gradient(135deg, #f6f9fc 0%, #e9ecef 100%);
            border-bottom: 2px solid #e3e8ee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .left-pane .pane-header {
            background: linear-gradient(135deg, #fff5f5 0%, #ffe0e0 100%);
            border-bottom-color: #ffc0c0;
        }

        .pane-title {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .pane-title-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .left-pane .pane-title-icon {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
        }

        .right-pane .pane-title-icon {
            background: linear-gradient(135deg, #4dabf7 0%, #339af0 100%);
        }

        .pane-title-text h3 {
            font-size: 20px;
            color: #0a2540;
            font-weight: 700;
            letter-spacing: -0.3px;
            margin-bottom: 4px;
        }

        .pane-title-text p {
            font-size: 13px;
            color: #697386;
            margin: 0;
        }

        .pane-actions {
            display: flex;
            gap: 12px;
        }

        .edit-btn {
            background: white;
            border: 2px solid #e3e8ee;
            color: #32325d;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .edit-btn:hover {
            background-color: #f6f9fc;
            border-color: #635bff;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(99, 91, 255, 0.15);
        }

        .edit-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .sync-btn {
            background: linear-gradient(135deg, #20e3b2 0%, #29ffc6 100%);
            color: #0a2540;
            border: none;
            padding: 10px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(32, 227, 178, 0.3);
            position: relative;
            overflow: hidden;
        }

        .sync-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .sync-btn:hover::before {
            left: 100%;
        }

        .sync-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(32, 227, 178, 0.4);
        }

        .sync-btn:disabled {
            background: linear-gradient(135deg, #e3e8ee 0%, #d1d5db 100%);
            color: #aab7c5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Language Selector */
        .language-selector {
            background: white;
            border: 2px solid #e3e8ee;
            color: #32325d;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            min-width: 150px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
        }

        .language-selector:hover {
            background-color: #f6f9fc;
            border-color: #4dabf7;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(77, 171, 247, 0.15);
        }

        .language-selector:focus {
            outline: none;
            border-color: #4dabf7;
            box-shadow: 0 0 0 4px rgba(77, 171, 247, 0.1);
        }

        .sync-btn.has-changes {
            background: linear-gradient(135deg, #ffaa00 0%, #ff6c00 100%);
            color: white;
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0% { box-shadow: 0 4px 12px rgba(255, 170, 0, 0.4); }
            50% { box-shadow: 0 4px 20px rgba(255, 170, 0, 0.6); }
            100% { box-shadow: 0 4px 12px rgba(255, 170, 0, 0.4); }
        }

        /* Divider between panes */
        .pane-divider {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, #e3e8ee 0%, #f6f9fc 50%, #e3e8ee 100%);
            z-index: 10;
        }

        .sync-indicator {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 3px solid #20e3b2;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
            box-shadow: 0 8px 24px rgba(32, 227, 178, 0.3);
            opacity: 0;
            transition: all 0.3s;
        }

        .sync-indicator.active {
            opacity: 1;
            animation: sync-pulse 1.5s ease-in-out infinite;
        }

        @keyframes sync-pulse {
            0% { 
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 8px 24px rgba(32, 227, 178, 0.3);
            }
            25% {
                transform: translate(-50%, -50%) scale(1.1) translateX(5px);
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.2);
                box-shadow: 0 12px 32px rgba(32, 227, 178, 0.5);
            }
            75% {
                transform: translate(-50%, -50%) scale(1.1) translateX(-5px);
            }
            100% { 
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 8px 24px rgba(32, 227, 178, 0.3);
            }
        }

        .pane-content {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
            background-color: white;
        }

        .left-pane {
            border-right: 1px solid #e3e8ee;
        }

        /* Upload Area - Enhanced Style */
        .upload-container {
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .upload-area {
            width: 100%;
            max-width: 480px;
            border: 3px dashed #c9d3e0;
            border-radius: 16px;
            padding: 48px 32px;
            text-align: center;
            background: linear-gradient(135deg, #f8fafc 0%, #e9ecef 100%);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .upload-area::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            transform: scale(0);
            transition: transform 0.6s;
        }

        .upload-area:hover::before {
            transform: scale(1);
        }

        .upload-area:hover {
            background: linear-gradient(135deg, #f0f3f7 0%, #dde1e7 100%);
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.15);
        }

        .upload-area.dragover {
            background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%);
            border-color: #667eea;
            transform: scale(1.02);
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.2);
        }

        .upload-icon {
            width: 72px;
            height: 72px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
        }

        .upload-area h4 {
            font-size: 20px;
            color: #32325d;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .upload-area p {
            color: #697386;
            font-size: 14px;
            margin-bottom: 24px;
        }

        .file-types {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 24px;
        }

        .file-type {
            background: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 13px;
            color: #697386;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 1px 3px rgba(50, 50, 93, 0.15);
        }

        .upload-button {
            background-color: #635bff;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        .upload-button:hover {
            background-color: #5469d4;
            transform: translateY(-1px);
            box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
        }

        input[type="file"] {
            display: none;
        }

        /* CV Content Styles */
        .cv-content {
            font-size: 15px;
            line-height: 1.8;
            color: #32325d;
            min-height: 100%;
            outline: none;
            transition: all 0.2s;
            position: relative;
        }

        .cv-content[contenteditable="true"] {
            padding: 20px;
            border-radius: 12px;
            background-color: #fafbfc;
            border: 2px dashed transparent;
        }

        .cv-content[contenteditable="true"]:focus {
            background-color: white;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1), 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* Left pane editing state */
        .left-pane .cv-content[contenteditable="true"] {
            background-color: #fffaf0;
            border-color: #ffc0c0;
        }

        .left-pane .cv-content[contenteditable="true"]:focus {
            background-color: white;
            border-color: #ff6b6b;
            box-shadow: 0 0 0 4px rgba(255, 107, 107, 0.1), 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* Right pane editing state */
        .right-pane .cv-content[contenteditable="true"] {
            background-color: #f0f9ff;
            border-color: #bae6fd;
        }

        .right-pane .cv-content[contenteditable="true"]:focus {
            background-color: white;
            border-color: #4dabf7;
            box-shadow: 0 0 0 4px rgba(77, 171, 247, 0.1), 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .cv-content h1 {
            font-size: 32px;
            margin-bottom: 16px;
            color: #0a2540;
            font-weight: 700;
            letter-spacing: -0.5px;
            position: relative;
            padding-bottom: 16px;
        }

        .cv-content h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }

        .cv-content h2 {
            font-size: 22px;
            margin-top: 32px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e3e8ee;
            color: #0a2540;
            font-weight: 600;
            letter-spacing: -0.3px;
            position: relative;
        }

        .cv-content h2::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 40px;
            height: 2px;
            background: linear-gradient(90deg, #4dabf7 0%, #339af0 100%);
        }

        .cv-content p {
            margin-bottom: 12px;
        }

        .cv-content ul {
            margin-left: 24px;
            margin-bottom: 16px;
        }

        .cv-content li {
            margin-bottom: 8px;
        }

        /* File Info Bar */
        .file-info-bar {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #86efac;
            border-radius: 10px;
            padding: 14px 20px;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.1);
        }

        .file-info-details {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .file-status {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #16a34a;
            font-weight: 600;
            font-size: 15px;
        }

        .file-status svg {
            background: white;
            border-radius: 50%;
            padding: 2px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .change-file-btn {
            background: white;
            border: 2px solid #e3e8ee;
            color: #697386;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
        }

        .change-file-btn:hover {
            background-color: #f6f9fc;
            color: #32325d;
            border-color: #667eea;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.15);
        }

        /* Edit Mode Indicator */
        .edit-indicator {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            border: 1px solid #ffc947;
            color: #6d4c00;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 4px 12px rgba(255, 201, 71, 0.2);
        }

        .edit-indicator svg {
            animation: edit-pulse 2s ease-in-out infinite;
        }

        @keyframes edit-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Action Bar */
        .action-bar {
            background: linear-gradient(180deg, #f6f9fc 0%, #e9ecef 100%);
            padding: 24px 32px;
            border-top: 2px solid #e3e8ee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .action-buttons {
            display: flex;
            gap: 16px;
        }

        .action-button {
            padding: 12px 24px;
            border: 2px solid #e3e8ee;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #697386;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .action-button:hover {
            background-color: #f6f9fc;
            color: #32325d;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .action-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .download-button {
            background: linear-gradient(135deg, #20e3b2 0%, #29ffc6 100%);
            color: #0a2540;
            border: none;
            padding: 14px 32px;
            font-size: 16px;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(32, 227, 178, 0.3);
            position: relative;
            overflow: hidden;
        }

        .download-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .download-button:hover::before {
            left: 100%;
        }

        .download-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(32, 227, 178, 0.4);
        }

        /* Status */
        .status {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #697386;
            font-size: 14px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #e3e8ee;
            transition: all 0.3s;
        }

        .status.ready .status-dot {
            background-color: #11c570;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Loading overlay */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            gap: 16px;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e3e8ee;
            border-top-color: #635bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: #697386;
            font-weight: 500;
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                padding: 0 20px;
            }
            
            .logo {
                font-size: 20px;
            }
            
            .logo svg {
                width: 32px;
                height: 32px;
            }
            
            .header-right {
                gap: 12px;
            }
            
            .save-status-header {
                display: none;
            }
            
            .help-btn {
                padding: 8px 16px;
                font-size: 14px;
            }
            
            .editor-panes {
                flex-direction: column;
                height: auto;
            }

            .pane {
                min-height: 500px;
            }

            .pane-divider, .sync-indicator {
                display: none;
            }

            .action-bar {
                flex-direction: column;
                gap: 16px;
            }

            .action-buttons {
                width: 100%;
                flex-direction: column;
            }

            .action-button {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <rect width="40" height="40" rx="8" fill="#5865F2"/>
                    <path d="M12 20L18 14L24 20L18 26L12 20Z" fill="white"/>
                    <path d="M18 14L24 8L30 14L24 20L18 14Z" fill="white" opacity="0.7"/>
                </svg>
                Applit CV Editor
            </div>
            <div class="header-right">
                <div class="save-status-header" id="headerSaveStatus">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>No document loaded</span>
                </div>
                <button class="help-btn" onclick="showHelp()">
                    <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                    Help
                </button>
            </div>
        </div>
    </header>

    <!-- Editor Container -->
    <div class="editor-container">
        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-steps">
                <div class="step completed">
                    <div class="step-circle">âœ“</div>
                    <div class="step-label">Upload</div>
                </div>
                <div class="step active">
                    <div class="step-circle">2</div>
                    <div class="step-label">Edit</div>
                </div>
                <div class="step">
                    <div class="step-circle">3</div>
                    <div class="step-label">Format</div>
                </div>
                <div class="step">
                    <div class="step-circle">4</div>
                    <div class="step-label">Download</div>
                </div>
            </div>
        </div>

        <!-- Instructions Card -->
        <div class="instructions-card">
            <div class="instructions-content">
                <div class="instructions-icon">
                    <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                        <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                    </svg>
                </div>
                <div class="instructions-text">
                    <h3>Transform Your CV to European Standards</h3>
                    <p>Upload â†’ Edit â†’ Choose Language â†’ Sync â†’ Download. Professional formatting for any European market.</p>
                </div>
            </div>
        </div>

        <!-- Editor Wrapper -->
        <div class="editor-wrapper">
            <!-- Two Pane Editor -->
            <div class="editor-panes">
                <!-- Left Pane - Original CV -->
                <div class="pane left-pane">
                    <div class="pane-header">
                        <div class="pane-title">
                            <div class="pane-title-icon">
                                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                                    <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"/>
                                    <path d="M14 3v5h5m-5 4H7m10 4H7m2 4H7"/>
                                </svg>
                            </div>
                            <div class="pane-title-text">
                                <h3 id="leftPaneTitle">Upload Your CV</h3>
                                <p>Your original document</p>
                            </div>
                        </div>
                        <div class="pane-actions" id="leftPaneActions" style="display: none;">
                            <button class="edit-btn" id="leftEditBtn" onclick="toggleLeftEdit()">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                </svg>
                                Edit
                            </button>
                            <button class="sync-btn" id="syncBtn" onclick="syncToRight()" disabled>
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M4 12a8 8 0 018-8V2.5L16 6l-4 3.5V8a6 6 0 00-6 6h1.5M20 12a8 8 0 01-8 8v1.5L8 18l4-3.5V16a6 6 0 006-6h-1.5"/>
                                </svg>
                                Sync Changes â†’
                            </button>
                        </div>
                    </div>
                    <div class="pane-content">
                        <!-- Upload Container -->
                        <div class="upload-container" id="uploadContainer">
                            <div class="upload-area" id="uploadArea">
                                <input type="file" id="fileInput" accept=".pdf,.doc,.docx" />
                                <div class="upload-icon">
                                    <svg width="32" height="32" fill="white" viewBox="0 0 24 24">
                                        <path d="M7 18a4.6 4.4 0 01 0-9 5 5 0 013.9-2 6.2 6.3 0 0111.8 1.6A4.7 4.7 0 0121 18m-8-5v4m0 0l3-3m-3 3l-3-3"/>
                                    </svg>
                                </div>
                                <h4>Drop your CV here</h4>
                                <p>or click to browse from your computer</p>
                                <div class="file-types">
                                    <div class="file-type">
                                        <svg width="16" height="16" fill="#697386" viewBox="0 0 24 24">
                                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"/>
                                        </svg>
                                        PDF
                                    </div>
                                    <div class="file-type">
                                        <svg width="16" height="16" fill="#697386" viewBox="0 0 24 24">
                                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"/>
                                        </svg>
                                        Word
                                    </div>
                                </div>
                                <button class="upload-button" onclick="document.getElementById('fileInput').click()">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/>
                                    </svg>
                                    Choose File
                                </button>
                            </div>
                        </div>
                        <!-- Original CV Content (Hidden by default) -->
                        <div id="originalCVContainer" style="display: none;">
                            <div class="file-info-bar">
                                <div class="file-info-details">
                                    <div class="file-status">
                                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                        </svg>
                                        <span id="uploadedFileName">Document loaded</span>
                                    </div>
                                </div>
                                <button class="change-file-btn" onclick="changeFile()">Change File</button>
                            </div>
                            <div id="leftEditIndicator" class="edit-indicator" style="display: none;">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                </svg>
                                Editing mode - Make your changes and click "Done" when finished
                            </div>
                            <div class="cv-content" id="leftCVContent">
                                <!-- Content will be populated from uploaded file -->
                            </div>
                        </div>
                        <div class="loading-overlay" id="leftLoadingOverlay">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Reading your CV...</div>
                        </div>
                    </div>
                </div>

                <!-- Divider with sync indicator -->
                <div class="pane-divider"></div>
                <div class="sync-indicator" id="syncIndicator">
                    <svg width="28" height="28" fill="#20e3b2" viewBox="0 0 24 24">
                        <path d="M5 12h14m0 0l-7-7m7 7l-7 7" stroke="#20e3b2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                    </svg>
                </div>

                <!-- Right Pane - German Formatted CV -->
                <div class="pane right-pane">
                    <div class="pane-header">
                        <div class="pane-title">
                            <div class="pane-title-icon">
                                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                                    <path d="M9 11H7v2h2m0-6H7v2h2m0 6H7v2h2m4-6h6m-6-4h6m-6 8h6M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"/>
                                </svg>
                            </div>
                            <div class="pane-title-text">
                                <h3 id="rightPaneTitle">German Professional CV</h3>
                                <p id="rightPaneSubtitle">Formatted to German standards</p>
                            </div>
                        </div>
                        <div class="pane-actions" id="rightPaneActions" style="display: none;">
                            <select class="language-selector" id="languageSelector" onchange="handleLanguageChange()">
                                <option value="de">ðŸ‡©ðŸ‡ª German</option>
                                <option value="fr">ðŸ‡«ðŸ‡· French</option>
                                <option value="es">ðŸ‡ªðŸ‡¸ Spanish</option>
                                <option value="it">ðŸ‡®ðŸ‡¹ Italian</option>
                                <option value="nl">ðŸ‡³ðŸ‡± Dutch</option>
                                <option value="pt">ðŸ‡µðŸ‡¹ Portuguese</option>
                                <option value="pl">ðŸ‡µðŸ‡± Polish</option>
                                <option value="sv">ðŸ‡¸ðŸ‡ª Swedish</option>
                            </select>
                            <button class="edit-btn" id="rightEditBtn" onclick="toggleRightEdit()">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                </svg>
                                Edit
                            </button>
                        </div>
                    </div>
                    <div class="pane-content" style="background-color: #fafbfc;">
                        <!-- Empty State for Right Panel -->
                        <div id="rightEmptyState" class="upload-container">
                            <div id="emptyState">
                                <svg width="72" height="72" viewBox="0 0 24 24" fill="none" stroke="#c9d3e0" stroke-width="1.5">
                                    <path d="M9 11H7v2h2m0-6H7v2h2m0 6H7v2h2m4-6h6m-6-4h6m-6 8h6M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"/>
                                </svg>
                                <h3>Professional CV Output</h3>
                                <p>Your formatted CV will appear here after uploading a document</p>
                            </div>
                        </div>
                        
                        <div id="rightCVContainer" style="display: none;">
                            <div id="rightEditIndicator" class="edit-indicator" style="display: none;">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                </svg>
                                Editing German version - Make your changes and click "Done" when finished
                            </div>
                            <div class="cv-content" id="rightCVContent">
                                <!-- Content will be populated dynamically -->
                            </div>
                        </div>
                        <div class="loading-overlay" id="rightLoadingOverlay">
                            <div class="loading-spinner"></div>
                            <div class="loading-text">Formatting to European standards...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Bar -->
            <div class="action-bar">
                <div class="status" id="status">
                    <div class="status-dot"></div>
                    <span>Ready to upload</span>
                </div>
                <div class="action-buttons">
                    <button class="action-button" onclick="previewCV()" disabled id="previewButton">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                        Preview
                    </button>
                    <button class="action-button download-button" onclick="downloadCV()" disabled id="downloadButton">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                        </svg>
                        Download PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Include necessary libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // State management
        let leftEditMode = false;
        let rightEditMode = false;
        let hasUnsyncedChanges = false;
        let originalContent = '';
        let currentFileName = '';
        let selectedLanguage = 'de'; // Default to German

        // Language configurations
        const languageConfigs = {
            de: {
                name: 'German',
                title: 'German Professional CV',
                subtitle: 'Formatted to German standards',
                translations: {
                    'Professional Summary': 'Kurzprofil',
                    'Experience': 'Berufserfahrung',
                    'Education': 'Ausbildung',
                    'Skills': 'Kenntnisse und FÃ¤higkeiten',
                    'Mechanical Engineer': 'Maschinenbauingenieur',
                    'Present': 'heute',
                    'Languages': 'Sprachen',
                    'Native': 'Muttersprache',
                    'Conversational': 'Konversationssicher'
                },
                additionalSections: `
                    <h2>ZusÃ¤tzliche Informationen</h2>
                    <p><strong>Arbeitserlaubnis:</strong> EU Blue Card (in Bearbeitung)</p>
                    <p><strong>VerfÃ¼gbarkeit:</strong> Ab sofort</p>
                    <p><strong>Gehaltsvorstellung:</strong> Nach Vereinbarung</p>
                `
            },
            fr: {
                name: 'French',
                title: 'French Professional CV',
                subtitle: 'Formatted to French standards',
                translations: {
                    'Professional Summary': 'Profil Professionnel',
                    'Experience': 'ExpÃ©rience Professionnelle',
                    'Education': 'Formation',
                    'Skills': 'CompÃ©tences',
                    'Mechanical Engineer': 'IngÃ©nieur MÃ©canique',
                    'Present': 'aujourd\'hui',
                    'Languages': 'Langues',
                    'Native': 'Langue maternelle',
                    'Conversational': 'Conversationnel'
                },
                additionalSections: `
                    <h2>Informations ComplÃ©mentaires</h2>
                    <p><strong>Permis de travail:</strong> Carte bleue europÃ©enne (en cours)</p>
                    <p><strong>DisponibilitÃ©:</strong> ImmÃ©diate</p>
                    <p><strong>PrÃ©tentions salariales:</strong> Ã€ nÃ©gocier</p>
                `
            },
            es: {
                name: 'Spanish',
                title: 'Spanish Professional CV',
                subtitle: 'Formatted to Spanish standards',
                translations: {
                    'Professional Summary': 'Resumen Profesional',
                    'Experience': 'Experiencia Laboral',
                    'Education': 'FormaciÃ³n AcadÃ©mica',
                    'Skills': 'Habilidades y Competencias',
                    'Mechanical Engineer': 'Ingeniero MecÃ¡nico',
                    'Present': 'actualidad',
                    'Languages': 'Idiomas',
                    'Native': 'Nativo',
                    'Conversational': 'Conversacional'
                },
                additionalSections: `
                    <h2>InformaciÃ³n Adicional</h2>
                    <p><strong>Permiso de trabajo:</strong> Tarjeta azul europea (en trÃ¡mite)</p>
                    <p><strong>Disponibilidad:</strong> Inmediata</p>
                    <p><strong>Expectativas salariales:</strong> A convenir</p>
                `
            },
            it: {
                name: 'Italian',
                title: 'Italian Professional CV',
                subtitle: 'Formatted to Italian standards',
                translations: {
                    'Professional Summary': 'Profilo Professionale',
                    'Experience': 'Esperienza Lavorativa',
                    'Education': 'Istruzione',
                    'Skills': 'Competenze',
                    'Mechanical Engineer': 'Ingegnere Meccanico',
                    'Present': 'presente',
                    'Languages': 'Lingue',
                    'Native': 'Madrelingua',
                    'Conversational': 'Conversazione'
                },
                additionalSections: `
                    <h2>Informazioni Aggiuntive</h2>
                    <p><strong>Permesso di lavoro:</strong> Carta blu europea (in elaborazione)</p>
                    <p><strong>DisponibilitÃ :</strong> Immediata</p>
                    <p><strong>Aspettative salariali:</strong> Da concordare</p>
                `
            },
            nl: {
                name: 'Dutch',
                title: 'Dutch Professional CV',
                subtitle: 'Formatted to Dutch standards',
                translations: {
                    'Professional Summary': 'Professioneel Profiel',
                    'Experience': 'Werkervaring',
                    'Education': 'Opleiding',
                    'Skills': 'Vaardigheden',
                    'Mechanical Engineer': 'Werktuigbouwkundig Ingenieur',
                    'Present': 'heden',
                    'Languages': 'Talen',
                    'Native': 'Moedertaal',
                    'Conversational': 'Conversatie'
                },
                additionalSections: `
                    <h2>Aanvullende Informatie</h2>
                    <p><strong>Werkvergunning:</strong> EU Blue Card (in behandeling)</p>
                    <p><strong>Beschikbaarheid:</strong> Per direct</p>
                    <p><strong>Salarisverwachting:</strong> In overleg</p>
                `
            },
            pt: {
                name: 'Portuguese',
                title: 'Portuguese Professional CV',
                subtitle: 'Formatted to Portuguese standards',
                translations: {
                    'Professional Summary': 'Perfil Profissional',
                    'Experience': 'ExperiÃªncia Profissional',
                    'Education': 'EducaÃ§Ã£o',
                    'Skills': 'CompetÃªncias',
                    'Mechanical Engineer': 'Engenheiro MecÃ¢nico',
                    'Present': 'presente',
                    'Languages': 'Idiomas',
                    'Native': 'Nativo',
                    'Conversational': 'Conversacional'
                },
                additionalSections: `
                    <h2>InformaÃ§Ãµes Adicionais</h2>
                    <p><strong>AutorizaÃ§Ã£o de trabalho:</strong> CartÃ£o azul europeu (em processamento)</p>
                    <p><strong>Disponibilidade:</strong> Imediata</p>
                    <p><strong>Expectativas salariais:</strong> A combinar</p>
                `
            },
            pl: {
                name: 'Polish',
                title: 'Polish Professional CV',
                subtitle: 'Formatted to Polish standards',
                translations: {
                    'Professional Summary': 'Profil Zawodowy',
                    'Experience': 'DoÅ›wiadczenie Zawodowe',
                    'Education': 'WyksztaÅ‚cenie',
                    'Skills': 'UmiejÄ™tnoÅ›ci',
                    'Mechanical Engineer': 'InÅ¼ynier Mechanik',
                    'Present': 'obecnie',
                    'Languages': 'JÄ™zyki',
                    'Native': 'Ojczysty',
                    'Conversational': 'Konwersacyjny'
                },
                additionalSections: `
                    <h2>Informacje Dodatkowe</h2>
                    <p><strong>Pozwolenie na pracÄ™:</strong> Niebieska karta UE (w trakcie)</p>
                    <p><strong>DostÄ™pnoÅ›Ä‡:</strong> Natychmiast</p>
                    <p><strong>Oczekiwania pÅ‚acowe:</strong> Do uzgodnienia</p>
                `
            },
            sv: {
                name: 'Swedish',
                title: 'Swedish Professional CV',
                subtitle: 'Formatted to Swedish standards',
                translations: {
                    'Professional Summary': 'Professionell Sammanfattning',
                    'Experience': 'Arbetslivserfarenhet',
                    'Education': 'Utbildning',
                    'Skills': 'FÃ¤rdigheter',
                    'Mechanical Engineer': 'MaskiningenjÃ¶r',
                    'Present': 'nuvarande',
                    'Languages': 'SprÃ¥k',
                    'Native': 'ModersmÃ¥l',
                    'Conversational': 'Konversation'
                },
                additionalSections: `
                    <h2>Ytterligare Information</h2>
                    <p><strong>ArbetstillstÃ¥nd:</strong> EU Blue Card (under behandling)</p>
                    <p><strong>TillgÃ¤nglighet:</strong> OmgÃ¥ende</p>
                    <p><strong>LÃ¶nefÃ¶rvÃ¤ntningar:</strong> Enligt Ã¶verenskommelse</p>
                `
            }
        };

        // DOM elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const uploadContainer = document.getElementById('uploadContainer');
        const originalCVContainer = document.getElementById('originalCVContainer');
        const leftCVContent = document.getElementById('leftCVContent');
        const rightCVContent = document.getElementById('rightCVContent');
        const rightCVContainer = document.getElementById('rightCVContainer');
        const leftLoadingOverlay = document.getElementById('leftLoadingOverlay');
        const rightLoadingOverlay = document.getElementById('rightLoadingOverlay');
        const leftPaneActions = document.getElementById('leftPaneActions');
        const rightPaneActions = document.getElementById('rightPaneActions');
        const status = document.getElementById('status');
        const previewButton = document.getElementById('previewButton');
        const downloadButton = document.getElementById('downloadButton');
        const syncBtn = document.getElementById('syncBtn');
        const syncIndicator = document.getElementById('syncIndicator');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeDragAndDrop();
            initializeFileUpload();
        });

        // Drag and drop functionality
        function initializeDragAndDrop() {
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileUpload(files[0]);
                }
            });
        }

        // File upload functionality
        function initializeFileUpload() {
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });

            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleFileUpload(e.target.files[0]);
                }
            });
        }

        // Initialize PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        // Handle file upload
        function handleFileUpload(file) {
            const validTypes = [
                'application/pdf', 
                'application/msword', 
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                'text/plain'
            ];
            
            if (!validTypes.includes(file.type)) {
                showNotification('Please upload a PDF, Word document, or text file', 'error');
                return;
            }

            currentFileName = file.name;
            document.getElementById('uploadedFileName').textContent = file.name;
            processFile(file);
        }

        // Process uploaded file with real file reading
        async function processFile(file) {
            updateStatus('Processing document...', false);
            leftLoadingOverlay.style.display = 'flex';
            rightLoadingOverlay.style.display = 'flex';
            
            // Hide empty state
            document.getElementById('rightEmptyState').style.display = 'none';

            try {
                let extractedText = '';
                
                if (file.type === 'application/pdf') {
                    extractedText = await extractTextFromPDF(file);
                } else if (file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
                    extractedText = await extractTextFromDocx(file);
                } else if (file.type === 'application/msword') {
                    extractedText = await extractTextFromDoc(file);
                } else if (file.type === 'text/plain') {
                    extractedText = await extractTextFromPlainText(file);
                }

                if (!extractedText.trim()) {
                    throw new Error('No text content could be extracted from the file');
                }

                // Convert extracted text to HTML format
                const htmlContent = convertTextToHTML(extractedText);
                
                // Show original CV
                uploadContainer.style.display = 'none';
                originalCVContainer.style.display = 'block';
                leftLoadingOverlay.style.display = 'none';
                document.querySelector('#leftPaneTitle').textContent = 'Original CV';
                document.querySelector('.left-pane .pane-title-text p').textContent = 'Edit your content here';
                leftPaneActions.style.display = 'flex';

                // Set the extracted content
                leftCVContent.innerHTML = htmlContent;
                originalContent = htmlContent;

                // Process and show formatted CV
                setTimeout(() => {
                    rightLoadingOverlay.style.display = 'none';
                    rightCVContainer.style.display = 'block';
                    rightPaneActions.style.display = 'flex';
                    
                    // Transform to selected language format
                    rightCVContent.innerHTML = transformToLanguageFormat(leftCVContent.innerHTML);
                    
                    updateStatus('CV ready for editing', true);
                    previewButton.disabled = false;
                    downloadButton.disabled = false;

                    // Update header with filename
                    const headerStatus = document.getElementById('headerSaveStatus');
                    headerStatus.classList.add('saved');
                    headerStatus.innerHTML = `
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <span>${currentFileName} loaded</span>
                    `;

                    // Add edit tracking
                    leftCVContent.addEventListener('input', handleLeftContentChange);
                    rightCVContent.addEventListener('input', handleRightContentChange);
                    
                    showNotification('CV processed successfully!', 'success');
                }, 1000);

            } catch (error) {
                console.error('Error processing file:', error);
                leftLoadingOverlay.style.display = 'none';
                rightLoadingOverlay.style.display = 'none';
                
                // Show empty state again on error
                document.getElementById('rightEmptyState').style.display = 'flex';
                
                showNotification(`Error processing file: ${error.message}`, 'error');
                updateStatus('Error processing file', false);
            }
        }

        // Extract text from PDF
        async function extractTextFromPDF(file) {
            const arrayBuffer = await file.arrayBuffer();
            const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
            let fullText = '';
            
            for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const textContent = await page.getTextContent();
                const pageText = textContent.items.map(item => item.str).join(' ');
                fullText += pageText + '\n';
            }
            
            return fullText;
        }

        // Extract text from DOCX
        async function extractTextFromDocx(file) {
            const arrayBuffer = await file.arrayBuffer();
            const result = await mammoth.extractRawText({ arrayBuffer });
            return result.value;
        }

        // Extract text from DOC (legacy Word format)
        async function extractTextFromDoc(file) {
            // For .doc files, we'll provide a fallback message
            showNotification('Legacy .doc format detected. For best results, please save as .docx format.', 'warning');
            return `Please convert your .doc file to .docx format for better text extraction.
            
You can still edit this content manually below.

Name: [Your Name]
Email: [Your Email]
Phone: [Your Phone]

Professional Summary
[Add your professional summary here]

Experience
[Add your work experience here]

Education
[Add your education here]

Skills
[Add your skills here]`;
        }

        // Extract text from plain text file
        async function extractTextFromPlainText(file) {
            return await file.text();
        }

        // Convert plain text to HTML format
        function convertTextToHTML(text) {
            // Basic text-to-HTML conversion
            let html = text;
            
            // Detect common CV sections and convert to headers
            const sectionPatterns = [
                { pattern: /^(PROFESSIONAL SUMMARY|SUMMARY|PROFILE|OBJECTIVE)$/gmi, tag: 'h2' },
                { pattern: /^(EXPERIENCE|WORK EXPERIENCE|EMPLOYMENT|CAREER)$/gmi, tag: 'h2' },
                { pattern: /^(EDUCATION|ACADEMIC BACKGROUND|QUALIFICATIONS)$/gmi, tag: 'h2' },
                { pattern: /^(SKILLS|TECHNICAL SKILLS|COMPETENCIES)$/gmi, tag: 'h2' },
                { pattern: /^(LANGUAGES|LANGUAGE SKILLS)$/gmi, tag: 'h2' },
                { pattern: /^(CERTIFICATIONS|CERTIFICATES)$/gmi, tag: 'h2' },
                { pattern: /^(PROJECTS|PROJECT EXPERIENCE)$/gmi, tag: 'h2' },
                { pattern: /^(AWARDS|ACHIEVEMENTS|HONORS)$/gmi, tag: 'h2' }
            ];

            // Split into lines and process
            let lines = html.split('\n').map(line => line.trim()).filter(line => line);
            let processedLines = [];
            
            for (let i = 0; i < lines.length; i++) {
                let line = lines[i];
                let processed = false;
                
                // Check if line matches any section pattern
                for (const pattern of sectionPatterns) {
                    if (pattern.pattern.test(line)) {
                        processedLines.push(`<${pattern.tag}>${line}</${pattern.tag}>`);
                        processed = true;
                        break;
                    }
                }
                
                if (!processed) {
                    // Check if it's likely a name (first line, all caps, or title case)
                    if (i === 0 && (line === line.toUpperCase() || /^[A-Z][a-z]+ [A-Z][a-z]+/.test(line))) {
                        processedLines.push(`<h1>${line}</h1>`);
                    }
                    // Check if it looks like contact info (email, phone)
                    else if (/@/.test(line) || /\+?\d{1,4}[-.\s]?\(?\d{1,3}\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}/.test(line)) {
                        processedLines.push(`<p><strong>${line}</strong></p>`);
                    }
                    // Check if it looks like a job title/company (followed by dates)
                    else if (i < lines.length - 1 && /\d{4}/.test(lines[i + 1])) {
                        processedLines.push(`<p><strong>${line}</strong></p>`);
                    }
                    // Check if it looks like dates
                    else if (/\d{4}/.test(line) && line.length < 50) {
                        processedLines.push(`<p><em>${line}</em></p>`);
                    }
                    // Check if it starts with bullet point indicators
                    else if (/^[-â€¢Â·*]/.test(line)) {
                        if (processedLines.length === 0 || !processedLines[processedLines.length - 1].includes('<ul>')) {
                            processedLines.push('<ul>');
                        }
                        processedLines.push(`<li>${line.replace(/^[-â€¢Â·*]\s*/, '')}</li>`);
                    }
                    // Regular paragraph
                    else {
                        // Close any open ul if we're not adding another li
                        if (processedLines.length > 0 && processedLines[processedLines.length - 1] === '</li>') {
                            processedLines.push('</ul>');
                        }
                        processedLines.push(`<p>${line}</p>`);
                    }
                }
            }
            
            // Close any open ul at the end
            if (processedLines.length > 0 && processedLines[processedLines.length - 1].includes('</li>')) {
                processedLines.push('</ul>');
            }
            
            return processedLines.join('\n');
        }

        // Transform content to selected language format
        function transformToLanguageFormat(content, languageCode = selectedLanguage) {
            const config = languageConfigs[languageCode];
            if (!config) return content;
            
            let transformedContent = content;
            
            // Apply translations
            for (const [eng, translated] of Object.entries(config.translations)) {
                transformedContent = transformedContent.replace(new RegExp(eng, 'g'), translated);
            }

            // Add language-specific sections if not present
            const sectionMarker = config.additionalSections.split('<h2>')[1]?.split('</h2>')[0];
            if (sectionMarker && !transformedContent.includes(sectionMarker)) {
                transformedContent += config.additionalSections;
            }

            return transformedContent;
        }

        // Handle language selection change
        function handleLanguageChange() {
            const languageSelector = document.getElementById('languageSelector');
            const newLanguage = languageSelector.value;
            
            if (newLanguage === selectedLanguage) return;
            
            selectedLanguage = newLanguage;
            const config = languageConfigs[selectedLanguage];
            
            // Update right panel title
            document.getElementById('rightPaneTitle').textContent = config.title;
            document.getElementById('rightPaneSubtitle').textContent = config.subtitle;
            
            // Show loading and retransform content
            rightLoadingOverlay.style.display = 'flex';
            rightLoadingOverlay.querySelector('.loading-text').textContent = `Converting to ${config.name} format...`;
            
            setTimeout(() => {
                // Transform content to new language
                rightCVContent.innerHTML = transformToLanguageFormat(leftCVContent.innerHTML, selectedLanguage);
                rightLoadingOverlay.style.display = 'none';
                
                // Flash the content to show change
                rightCVContent.style.animation = 'slideIn 0.5s ease-out';
                setTimeout(() => {
                    rightCVContent.style.animation = '';
                }, 500);
                
                showNotification(`CV converted to ${config.name} format!`, 'success');
                updateStatus(`CV ready in ${config.name} format`, true);
            }, 1000);
        }

        // Toggle left panel edit mode
        function toggleLeftEdit() {
            const editBtn = document.getElementById('leftEditBtn');
            const editIndicator = document.getElementById('leftEditIndicator');
            
            leftEditMode = !leftEditMode;
            
            if (leftEditMode) {
                leftCVContent.contentEditable = true;
                leftCVContent.focus();
                editBtn.classList.add('active');
                editBtn.innerHTML = `
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Done
                `;
                editIndicator.style.display = 'flex';
                showNotification('Edit mode activated - Make your changes', 'info');
            } else {
                leftCVContent.contentEditable = false;
                editBtn.classList.remove('active');
                editBtn.innerHTML = `
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                    </svg>
                    Edit
                `;
                editIndicator.style.display = 'none';
                
                if (hasUnsyncedChanges) {
                    showNotification('You have unsaved changes - Click "Sync Changes" to update the right panel', 'warning');
                }
            }
        }

        // Toggle right panel edit mode
        function toggleRightEdit() {
            const editBtn = document.getElementById('rightEditBtn');
            const editIndicator = document.getElementById('rightEditIndicator');
            
            rightEditMode = !rightEditMode;
            
            if (rightEditMode) {
                rightCVContent.contentEditable = true;
                rightCVContent.focus();
                editBtn.classList.add('active');
                editBtn.innerHTML = `
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Done
                `;
                editIndicator.style.display = 'flex';
                showNotification(`Editing ${languageConfigs[selectedLanguage].name} version directly`, 'info');
            } else {
                rightCVContent.contentEditable = false;
                editBtn.classList.remove('active');
                editBtn.innerHTML = `
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                    </svg>
                    Edit
                `;
                editIndicator.style.display = 'none';
                showNotification(`Changes saved to ${languageConfigs[selectedLanguage].name} version`, 'success');
            }
        }

        // Handle left content changes
        function handleLeftContentChange() {
            if (!leftEditMode) return;
            
            hasUnsyncedChanges = true;
            syncBtn.disabled = false;
            syncBtn.classList.add('has-changes');
            updateStatus('Unsaved changes - Click "Sync Changes" to update right panel', true);
        }

        // Handle right content changes
        function handleRightContentChange() {
            if (!rightEditMode) return;
            updateStatus(`Editing ${languageConfigs[selectedLanguage].name} version directly`, true);
        }

        // Sync changes from left to right
        function syncToRight() {
            if (!hasUnsyncedChanges) return;
            
            // Show sync animation
            syncIndicator.classList.add('active');
            rightLoadingOverlay.style.display = 'flex';
            rightLoadingOverlay.querySelector('.loading-text').textContent = 'Syncing and formatting...';
            
            showNotification(`Syncing changes to ${languageConfigs[selectedLanguage].name} format...`, 'info');
            
            setTimeout(() => {
                // Transform and copy content
                rightCVContent.innerHTML = transformToGermanFormat(leftCVContent.innerHTML);
                
                // Hide loading
                rightLoadingOverlay.style.display = 'none';
                syncIndicator.classList.remove('active');
                
                // Reset sync button
                hasUnsyncedChanges = false;
                syncBtn.disabled = true;
                syncBtn.classList.remove('has-changes');
                
                updateStatus('Changes synced successfully', true);
                showNotification(`Changes synced and formatted to ${languageConfigs[selectedLanguage].name} standards!`, 'success');
                
                // Flash the right content
                rightCVContent.style.animation = 'slideIn 0.5s ease-out';
                setTimeout(() => {
                    rightCVContent.style.animation = '';
                }, 500);
            }, 1500);
        }

        // Change file
        function changeFile() {
            if (hasUnsyncedChanges) {
                if (!confirm('You have unsaved changes. Are you sure you want to upload a new file?')) {
                    return;
                }
            }

            // Reset everything
            uploadContainer.style.display = 'flex';
            originalCVContainer.style.display = 'none';
            rightCVContainer.style.display = 'none';
            document.getElementById('rightEmptyState').style.display = 'flex';
            document.querySelector('#leftPaneTitle').textContent = 'Upload Your CV';
            document.querySelector('.left-pane .pane-title-text p').textContent = 'Your original document';
            leftPaneActions.style.display = 'none';
            rightPaneActions.style.display = 'none';
            updateStatus('Ready to upload', false);
            previewButton.disabled = true;
            downloadButton.disabled = true;
            fileInput.value = '';
            hasUnsyncedChanges = false;
            leftEditMode = false;
            rightEditMode = false;
            currentFileName = '';
            
            // Reset content
            leftCVContent.innerHTML = '';
            rightCVContent.innerHTML = '';
            originalContent = '';
            
            // Reset language selector
            document.getElementById('languageSelector').value = 'de';
            selectedLanguage = 'de';
            document.getElementById('rightPaneTitle').textContent = 'German Professional CV';
            document.getElementById('rightPaneSubtitle').textContent = 'Formatted to German standards';
            
            // Reset header status
            const headerStatus = document.getElementById('headerSaveStatus');
            headerStatus.classList.remove('saved');
            headerStatus.innerHTML = `
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span>No document loaded</span>
            `;
            
            showNotification('Ready to upload a new CV', 'info');
        }

        // Preview CV
        function previewCV() {
            // Create preview modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                animation: fadeIn 0.3s ease-out;
            `;

            const preview = document.createElement('div');
            preview.style.cssText = `
                background: white;
                width: 90%;
                max-width: 800px;
                height: 90%;
                border-radius: 12px;
                overflow: auto;
                padding: 40px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                position: relative;
                animation: slideIn 0.3s ease-out;
            `;

            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = 'âœ•';
            closeBtn.style.cssText = `
                position: absolute;
                top: 20px;
                right: 20px;
                background: #f6f9fc;
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                font-size: 20px;
                cursor: pointer;
                transition: all 0.2s;
            `;
            closeBtn.onmouseover = () => closeBtn.style.background = '#e3e8ee';
            closeBtn.onmouseout = () => closeBtn.style.background = '#f6f9fc';
            closeBtn.onclick = () => document.body.removeChild(modal);

            preview.innerHTML = rightCVContent.innerHTML;
            preview.appendChild(closeBtn);
            modal.appendChild(preview);
            document.body.appendChild(modal);

            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };

            showNotification('Preview mode - Click outside or X to close', 'info');
        }

        // Download CV as actual PDF
        function downloadCV() {
            const originalContent = downloadButton.innerHTML;
            downloadButton.innerHTML = `
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16z"/>
                    <path d="M12 6a1 1 0 011 1v4.59l2.71 2.7a1 1 0 11-1.42 1.42l-3-3A1 1 0 0111 12V7a1 1 0 011-1z"/>
                </svg>
                Generating PDF...
            `;
            downloadButton.disabled = true;

            try {
                // Get content from right panel
                const content = rightCVContent.innerHTML;
                
                // Create new jsPDF instance
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Convert HTML content to text for PDF
                const textContent = convertHTMLToPlainText(content);
                
                // Set up PDF formatting
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                
                let yPosition = 20;
                const lineHeight = 7;
                const margin = 20;
                const pageWidth = doc.internal.pageSize.width;
                const maxLineWidth = pageWidth - 2 * margin;
                
                // Split content into sections
                const sections = textContent.split('\n\n');
                
                for (let section of sections) {
                    if (!section.trim()) continue;
                    
                    const lines = section.split('\n');
                    const title = lines[0];
                    
                    // Check if we need a new page
                    if (yPosition > 250) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    // Add section title
                    if (title.toUpperCase() === title || title.length < 50) {
                        doc.setFont(undefined, 'bold');
                        doc.setFontSize(title === lines[0] && sections.indexOf(section) === 0 ? 18 : 14);
                        
                        const titleLines = doc.splitTextToSize(title, maxLineWidth);
                        doc.text(titleLines, margin, yPosition);
                        yPosition += titleLines.length * lineHeight + 5;
                    }
                    
                    // Add section content
                    doc.setFont(undefined, 'normal');
                    doc.setFontSize(11);
                    
                    for (let i = (title.toUpperCase() === title || title.length < 50) ? 1 : 0; i < lines.length; i++) {
                        if (!lines[i].trim()) continue;
                        
                        // Check if we need a new page
                        if (yPosition > 270) {
                            doc.addPage();
                            yPosition = 20;
                        }
                        
                        const textLines = doc.splitTextToSize(lines[i], maxLineWidth);
                        doc.text(textLines, margin, yPosition);
                        yPosition += textLines.length * lineHeight + 2;
                    }
                    
                    yPosition += 5; // Extra space between sections
                }
                
                // Save the PDF
                const filename = `${currentFileName.replace(/\.[^/.]+$/, '')}_${languageConfigs[selectedLanguage].name}_CV.pdf`;
                doc.save(filename);
                
                downloadButton.innerHTML = `
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Downloaded!
                `;

                showNotification('PDF downloaded successfully!', 'success');

            } catch (error) {
                console.error('Error generating PDF:', error);
                showNotification('Error generating PDF. Please try again.', 'error');
                downloadButton.innerHTML = originalContent;
            }

            setTimeout(() => {
                downloadButton.innerHTML = originalContent;
                downloadButton.disabled = false;
            }, 2000);
        }

        // Convert HTML to plain text for PDF generation
        function convertHTMLToPlainText(html) {
            // Create a temporary div to parse HTML
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            
            let text = '';
            
            // Process each element
            const elements = tempDiv.children;
            for (let element of elements) {
                const tagName = element.tagName.toLowerCase();
                const content = element.textContent.trim();
                
                if (!content) continue;
                
                switch (tagName) {
                    case 'h1':
                        text += content.toUpperCase() + '\n\n';
                        break;
                    case 'h2':
                        text += '\n' + content.toUpperCase() + '\n';
                        break;
                    case 'h3':
                        text += '\n' + content + '\n';
                        break;
                    case 'p':
                        text += content + '\n';
                        break;
                    case 'ul':
                        const listItems = element.querySelectorAll('li');
                        for (let li of listItems) {
                            text += 'â€¢ ' + li.textContent.trim() + '\n';
                        }
                        text += '\n';
                        break;
                    default:
                        text += content + '\n';
                }
            }
            
            return text;
        }

        // Update status
        function updateStatus(message, ready) {
            const statusDot = status.querySelector('.status-dot');
            const statusText = status.querySelector('span');
            statusText.textContent = message;
            if (ready) {
                status.classList.add('ready');
            } else {
                status.classList.remove('ready');
            }
            
            // Also update header status
            updateHeaderStatus(message, ready);
        }
        
        // Update header save status
        function updateHeaderStatus(message, saved) {
            const headerStatus = document.getElementById('headerSaveStatus');
            const statusText = headerStatus.querySelector('span');
            
            if (currentFileName && saved) {
                headerStatus.classList.add('saved');
                headerStatus.innerHTML = `
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    <span>All changes saved</span>
                `;
            } else if (currentFileName && !saved) {
                headerStatus.classList.remove('saved');
                headerStatus.innerHTML = `
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>${message}</span>
                `;
            } else {
                headerStatus.classList.remove('saved');
                headerStatus.innerHTML = `
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>No document loaded</span>
                `;
            }
        }
        
        // Show help modal
        function showHelp() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                animation: fadeIn 0.3s ease-out;
            `;

            const helpContent = document.createElement('div');
            helpContent.style.cssText = `
                background: white;
                width: 90%;
                max-width: 600px;
                max-height: 80vh;
                border-radius: 12px;
                overflow: auto;
                padding: 40px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                position: relative;
                animation: slideIn 0.3s ease-out;
            `;

            helpContent.innerHTML = `
                <h2 style="margin-bottom: 24px; color: #0a2540;">How to Use CV Editor</h2>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #32325d; margin-bottom: 12px; font-size: 18px;">1. Upload Your CV</h3>
                    <p style="color: #697386; line-height: 1.6;">Drag and drop or click to upload your CV in PDF or Word format.</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #32325d; margin-bottom: 12px; font-size: 18px;">2. Edit Your Content</h3>
                    <p style="color: #697386; line-height: 1.6;">Click the "Edit" button on the left panel to modify your original CV content.</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #32325d; margin-bottom: 12px; font-size: 18px;">3. Choose Your Target Language</h3>
                    <p style="color: #697386; line-height: 1.6;">Select your target language from the dropdown in the right panel (German, French, Spanish, Italian, Dutch, Portuguese, Polish, or Swedish).</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #32325d; margin-bottom: 12px; font-size: 18px;">4. Sync to Selected Language</h3>
                    <p style="color: #697386; line-height: 1.6;">After editing, click "Sync Changes" to update the right panel with your selected language formatting.</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #32325d; margin-bottom: 12px; font-size: 18px;">5. Fine-tune Language Version</h3>
                    <p style="color: #697386; line-height: 1.6;">You can also directly edit the formatted version by clicking "Edit" on the right panel.</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #32325d; margin-bottom: 12px; font-size: 18px;">6. Download Your CV</h3>
                    <p style="color: #697386; line-height: 1.6;">Click "Download PDF" to save your professionally formatted CV in your selected language.</p>
                </div>
                
                <div style="background: #f6f9fc; border-radius: 8px; padding: 16px; margin-top: 24px;">
                    <p style="color: #697386; font-size: 14px; margin: 0;">
                        <strong>Tips:</strong> The sync button will glow orange when you have unsaved changes. You can change languages anytime - your content will be automatically reformatted to match the selected country's standards.
                    </p>
                </div>
            `;

            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = 'âœ•';
            closeBtn.style.cssText = `
                position: absolute;
                top: 20px;
                right: 20px;
                background: #f6f9fc;
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                font-size: 20px;
                cursor: pointer;
                transition: all 0.2s;
            `;
            closeBtn.onmouseover = () => closeBtn.style.background = '#e3e8ee';
            closeBtn.onmouseout = () => closeBtn.style.background = '#f6f9fc';
            closeBtn.onclick = () => document.body.removeChild(modal);

            helpContent.appendChild(closeBtn);
            modal.appendChild(helpContent);
            document.body.appendChild(modal);

            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: white;
                padding: 16px 24px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                display: flex;
                align-items: center;
                gap: 12px;
                font-size: 14px;
                font-weight: 500;
                z-index: 9999;
                animation: slideInRight 0.3s ease-out;
                border-left: 4px solid ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : type === 'warning' ? '#f59e0b' : '#3b82f6'};
            `;

            const icon = document.createElement('div');
            icon.innerHTML = type === 'success' ? 'âœ“' : type === 'error' ? 'âœ•' : type === 'warning' ? '!' : 'â„¹';
            icon.style.cssText = `
                width: 24px;
                height: 24px;
                border-radius: 50%;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : type === 'warning' ? '#f59e0b' : '#3b82f6'};
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
            `;

            notification.appendChild(icon);
            notification.appendChild(document.createTextNode(message));
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes slideIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            @keyframes slideInRight {
                from { opacity: 0; transform: translateX(100px); }
                to { opacity: 1; transform: translateX(0); }
            }
            @keyframes slideOutRight {
                from { opacity: 1; transform: translateX(0); }
                to { opacity: 0; transform: translateX(100px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>