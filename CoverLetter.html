<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cover Letter Editor - Applit</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 25%, #f8fafc 50%, #ffffff 75%, #f1f5f9 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #0f172a;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.4);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 12px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .nav {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 28px;
            font-weight: 800;
            color: #1e293b;
            letter-spacing: -0.5px;
            text-decoration: none;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .logo-icon::before {
            content: '✉️';
            font-size: 20px;
            z-index: 2;
        }

        .logo-text {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-actions {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .save-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #f0fdf4;
            border: 1px solid #86efac;
            border-radius: 20px;
            color: #16a34a;
            font-size: 14px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .save-status.visible {
            opacity: 1;
        }

        .help-btn {
            background: white;
            border: 2px solid #e2e8f0;
            color: #64748b;
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .help-btn:hover {
            background: #f8fafc;
            border-color: #3b82f6;
            color: #3b82f6;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }

        /* Progress Bar */
        .progress-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .progress-title {
            font-size: 16px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e2e8f0;
            z-index: 0;
        }

        .progress-line-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
            width: 66%;
            transition: width 0.5s ease;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            color: #94a3b8;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .step.completed .step-circle {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .step.active .step-circle {
            background: white;
            border: 3px solid #3b82f6;
            color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }

        .step-label {
            font-size: 14px;
            color: #64748b;
            font-weight: 600;
        }

        .step.completed .step-label,
        .step.active .step-label {
            color: #1e293b;
        }

        /* Editor Section */
        .editor-wrapper {
            background: white;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            margin-bottom: 24px;
        }

        .editor-header {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            padding: 20px 24px;
            color: white;
        }

        .editor-header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .editor-title h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            font-weight: 700;
        }

        .job-info {
            display: flex;
            align-items: center;
            gap: 24px;
            font-size: 14px;
            opacity: 0.9;
        }

        .job-info-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Split Pane Layout */
        .editor-panes {
            display: flex;
            height: 600px;
            position: relative;
        }

        .pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .pane-header {
            padding: 20px 24px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .left-pane .pane-header {
            background: #fffbeb;
            border-bottom: 1px solid #fde68a;
            border-right: 1px solid #e2e8f0;
        }

        .pane-header-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .pane-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .left-pane .pane-icon {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
        }

        .right-pane .pane-icon {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .pane-title-text h3 {
            font-size: 16px;
            font-weight: 700;
            color: #1e293b;
        }

        .pane-title-text p {
            font-size: 13px;
            color: #64748b;
            margin-top: 2px;
        }

        /* Language Selector */
        .language-selector {
            position: relative;
        }

        .language-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            transition: all 0.3s ease;
        }

        .language-button:hover {
            border-color: #3b82f6;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            display: none;
            min-width: 180px;
            z-index: 100;
        }

        .language-dropdown.active {
            display: block;
        }

        .language-option {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .language-option:hover {
            background: #f8fafc;
        }

        .language-option.selected {
            background: #eff6ff;
            color: #3b82f6;
        }

        /* Content Area */
        .pane-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            background: white;
        }

        .left-pane .pane-content {
            border-right: 1px solid #e2e8f0;
        }

        .cover-letter-content {
            font-size: 15px;
            line-height: 1.8;
            color: #1e293b;
            min-height: 100%;
            outline: none;
            padding: 20px;
            border-radius: 12px;
            background: #fafbfc;
            border: 2px dashed transparent;
            transition: all 0.3s ease;
        }

        .cover-letter-content:focus {
            background: white;
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }

        .cover-letter-content.editable {
            cursor: text;
        }

        /* Sync Section */
        .sync-section {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 50;
        }

        .sync-divider {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e2e8f0;
            transform: translateX(-50%);
        }

        .sync-container {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .sync-button {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .sync-tooltip {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .sync-tooltip::before {
            content: '';
            position: absolute;
            top: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 4px solid transparent;
            border-right: 4px solid transparent;
            border-bottom: 4px solid #1e293b;
        }

        .sync-button:hover .sync-tooltip {
            opacity: 1;
        }

        .sync-instruction {
            background: #fef3c7;
            color: #92400e;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: none;
            animation: bounce 2s ease-in-out infinite;
            white-space: nowrap;
        }

        .sync-instruction.visible {
            display: block;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .sync-button:hover {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-color: transparent;
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
        }

        .sync-button:hover svg {
            color: white;
        }

        .sync-button:hover .sync-tooltip {
            opacity: 1;
        }

        .sync-button.has-changes {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            border-color: transparent;
            animation: pulse 2s infinite;
        }

        .sync-button.has-changes svg {
            color: white;
        }

        .sync-button.has-changes .sync-tooltip {
            background: #92400e;
        }

        .sync-button.has-changes .sync-tooltip::before {
            border-bottom-color: #92400e;
        }

        @keyframes pulse {
            0% { box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
            50% { box-shadow: 0 4px 20px rgba(245, 158, 11, 0.6); }
            100% { box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
        }

        .sync-button svg {
            width: 24px;
            height: 24px;
            color: #64748b;
            transition: all 0.3s ease;
        }

        /* Action Bar */
        .action-bar {
            background: #f8fafc;
            padding: 20px 24px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .action-status {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #e2e8f0;
            transition: all 0.3s ease;
        }

        .status-indicator.saved {
            background: #10b981;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .action-buttons {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary {
            background: white;
            border: 2px solid #e2e8f0;
            color: #64748b;
        }

        .btn-secondary:hover {
            background: #f8fafc;
            border-color: #3b82f6;
            color: #3b82f6;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Info Box */
        .info-box {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 1px solid #93c5fd;
            border-radius: 16px;
            padding: 16px 20px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .info-box-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
        }

        .info-box-content {
            flex: 1;
        }

        .info-box-title {
            font-weight: 700;
            color: #1e293b;
            font-size: 15px;
            margin-bottom: 4px;
        }

        .info-box-text {
            font-size: 14px;
            color: #64748b;
            line-height: 1.5;
        }

        /* Loading State */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            text-align: center;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid #e2e8f0;
            border-top-color: #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: #64748b;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .editor-panes {
                flex-direction: column;
                height: auto;
            }

            .pane {
                min-height: 400px;
            }

            .sync-section {
                display: none;
            }

            .left-pane .pane-content {
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
            }

            .action-bar {
                flex-direction: column;
                gap: 16px;
            }

            .action-buttons {
                width: 100%;
            }

            .btn {
                flex: 1;
                justify-content: center;
            }

            /* Show mobile sync button */
            .left-pane .pane-header::after {
                content: 'Changes will sync automatically on mobile';
                display: block;
                font-size: 12px;
                color: #f59e0b;
                margin-top: 8px;
                font-weight: 500;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <a href="/" class="logo">
                <div class="logo-icon"></div>
                <span class="logo-text">Applit</span>
            </a>
            <div class="nav-actions">
                <div class="save-status" id="saveStatus">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    <span>All changes saved</span>
                </div>
                <button class="help-btn" onclick="showHelp()">
                    <span>Help</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-title">
                <svg width="20" height="20" fill="#3b82f6" viewBox="0 0 24 24">
                    <path d="M13 16h-1v-4h1m0-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Your Cover Letter Progress
            </div>
            <div class="progress-steps">
                <div class="progress-line">
                    <div class="progress-line-fill"></div>
                </div>
                <div class="step completed">
                    <div class="step-circle">✓</div>
                    <div class="step-label">CV Uploaded</div>
                </div>
                <div class="step completed">
                    <div class="step-circle">✓</div>
                    <div class="step-label">Job Matched</div>
                </div>
                <div class="step active">
                    <div class="step-circle">3</div>
                    <div class="step-label">Edit & Translate</div>
                </div>
                <div class="step">
                    <div class="step-circle">4</div>
                    <div class="step-label">Download</div>
                </div>
            </div>
        </div>

        <!-- Info Box -->
        <div class="info-box">
            <div class="info-box-icon">
                <svg width="24" height="24" fill="#3b82f6" viewBox="0 0 24 24">
                    <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                </svg>
            </div>
            <div class="info-box-content">
                <div class="info-box-title">AI-Generated Cover Letter Ready!</div>
                <div class="info-box-text">Edit in your preferred language on the left, then <strong>click the sync button (→) in the middle</strong> to update the German version. The right panel supports German and English formats.</div>
            </div>
        </div>

        <!-- Editor Wrapper -->
        <div class="editor-wrapper">
            <!-- Editor Header -->
            <div class="editor-header">
                <div class="editor-header-content">
                    <div class="editor-title">
                        <svg width="32" height="32" fill="white" viewBox="0 0 24 24">
                            <path d="M3 3v18h18V3H3zm16 16H5V5h14v14zm-10-2h6v-2H9v2zm0-4h6v-2H9v2zm0-4h6V7H9v2z"/>
                        </svg>
                        <h2>Cover Letter Editor</h2>
                    </div>
                    <div class="job-info">
                        <div class="job-info-item">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 00-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"/>
                            </svg>
                            <span>Mechanical Engineer</span>
                        </div>
                        <div class="job-info-item">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 010-5 2.5 2.5 0 010 5z"/>
                            </svg>
                            <span>Berlin, Germany</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Editor Panes -->
            <div class="editor-panes">
                <!-- Left Pane - Translation -->
                <div class="pane left-pane">
                    <div class="pane-header">
                        <div class="pane-header-title">
                            <div class="pane-icon">🌍</div>
                            <div class="pane-title-text">
                                <h3>Edit in Your Language</h3>
                                <p>Make changes in your preferred language</p>
                            </div>
                        </div>
                        <div class="language-selector">
                            <button class="language-button" onclick="toggleLeftLanguage()">
                                <span id="leftLangFlag">🇬🇧</span>
                                <span id="leftLangName">English</span>
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M7 10l5 5 5-5z"/>
                                </svg>
                            </button>
                            <div class="language-dropdown" id="leftLanguageDropdown">
                                <div class="language-option selected" onclick="selectLeftLanguage('en', '🇬🇧', 'English')">
                                    <span>🇬🇧</span> English
                                </div>
                                <div class="language-option" onclick="selectLeftLanguage('es', '🇪🇸', 'Spanish')">
                                    <span>🇪🇸</span> Spanish
                                </div>
                                <div class="language-option" onclick="selectLeftLanguage('fr', '🇫🇷', 'French')">
                                    <span>🇫🇷</span> French
                                </div>
                                <div class="language-option" onclick="selectLeftLanguage('pt', '🇵🇹', 'Portuguese')">
                                    <span>🇵🇹</span> Portuguese
                                </div>
                                <div class="language-option" onclick="selectLeftLanguage('it', '🇮🇹', 'Italian')">
                                    <span>🇮🇹</span> Italian
                                </div>
                                <div class="language-option" onclick="selectLeftLanguage('ar', '🇸🇦', 'Arabic')">
                                    <span>🇸🇦</span> Arabic
                                </div>
                                <div class="language-option" onclick="selectLeftLanguage('ru', '🇷🇺', 'Russian')">
                                    <span>🇷🇺</span> Russian
                                </div>
                                <div class="language-option" onclick="selectLeftLanguage('zh', '🇨🇳', 'Chinese')">
                                    <span>🇨🇳</span> Chinese
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pane-content">
                        <div class="cover-letter-content editable" contenteditable="true" id="leftContent" oninput="handleLeftChange()">
                            <p>Dear Hiring Manager,</p>
                            <p>I am writing to express my strong interest in the Mechanical Engineer position at your company in Berlin. With my comprehensive background in mechanical engineering and proven track record of innovative problem-solving, I am confident in my ability to contribute significantly to your team.</p>
                            <p>Throughout my career, I have successfully:</p>
                            <ul>
                                <li>Designed and optimized mechanical systems resulting in 25% efficiency improvements</li>
                                <li>Led cross-functional teams of up to 10 engineers on complex projects</li>
                                <li>Implemented cost-saving measures that reduced production expenses by €150,000 annually</li>
                                <li>Developed innovative solutions for manufacturing challenges using CAD/CAM technologies</li>
                            </ul>
                            <p>My expertise in [specific technology/methodology] aligns perfectly with your requirements, and I am particularly excited about the opportunity to work on [specific project/aspect of the role]. Having researched your company's commitment to sustainable engineering practices, I am eager to contribute my experience in eco-friendly design solutions.</p>
                            <p>I would welcome the opportunity to discuss how my skills and enthusiasm can contribute to your team's continued success. Thank you for considering my application.</p>
                            <p>Sincerely,<br>[Your Name]</p>
                        </div>
                        <div class="loading-overlay" id="leftLoading">
                            <div class="loading-content">
                                <div class="loading-spinner"></div>
                                <div class="loading-text">Translating content...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sync Section -->
                <div class="sync-section">
                    <div class="sync-divider"></div>
                    <div class="sync-container">
                        <div class="sync-instruction" id="syncInstruction">Click to sync →</div>
                        <button class="sync-button" id="syncButton" onclick="syncChanges()" title="Click to sync changes to German version">
                            <svg fill="currentColor" viewBox="0 0 24 24">
                                <path d="M5 12h14m0 0l-7-7m7 7l-7 7"/>
                            </svg>
                            <div class="sync-tooltip">Sync your changes</div>
                        </button>
                    </div>
                </div>

                <!-- Right Pane - German -->
                <div class="pane right-pane">
                    <div class="pane-header">
                        <div class="pane-header-title">
                            <div class="pane-icon">🇩🇪</div>
                            <div class="pane-title-text">
                                <h3>Professional Format</h3>
                                <p>German standard cover letter</p>
                            </div>
                        </div>
                        <div class="language-selector">
                            <button class="language-button" onclick="toggleRightLanguage()">
                                <span id="rightLangFlag">🇩🇪</span>
                                <span id="rightLangName">German</span>
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M7 10l5 5 5-5z"/>
                                </svg>
                            </button>
                            <div class="language-dropdown" id="rightLanguageDropdown">
                                <div class="language-option selected" onclick="selectRightLanguage('de', '🇩🇪', 'German')">
                                    <span>🇩🇪</span> German
                                </div>
                                <div class="language-option" onclick="selectRightLanguage('en', '🇬🇧', 'English')">
                                    <span>🇬🇧</span> English
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pane-content">
                        <div class="cover-letter-content" id="rightContent">
                            <p>Sehr geehrte Damen und Herren,</p>
                            <p>mit großem Interesse bewerbe ich mich auf die ausgeschriebene Position als Maschinenbauingenieur in Ihrem Unternehmen in Berlin. Mit meinem umfassenden Hintergrund im Maschinenbau und meiner nachgewiesenen Erfolgsbilanz bei innovativer Problemlösung bin ich überzeugt, dass ich einen bedeutenden Beitrag zu Ihrem Team leisten kann.</p>
                            <p>Im Laufe meiner Karriere habe ich erfolgreich:</p>
                            <ul>
                                <li>Mechanische Systeme entworfen und optimiert, was zu einer Effizienzsteigerung von 25% führte</li>
                                <li>Funktionsübergreifende Teams von bis zu 10 Ingenieuren bei komplexen Projekten geleitet</li>
                                <li>Kostensparmaßnahmen implementiert, die die Produktionskosten um 150.000 € jährlich reduzierten</li>
                                <li>Innovative Lösungen für Fertigungsherausforderungen mit CAD/CAM-Technologien entwickelt</li>
                            </ul>
                            <p>Meine Expertise in [spezifische Technologie/Methodik] passt perfekt zu Ihren Anforderungen, und ich freue mich besonders auf die Möglichkeit, an [spezifisches Projekt/Aspekt der Rolle] zu arbeiten. Nach eingehender Recherche über das Engagement Ihres Unternehmens für nachhaltige Ingenieurspraktiken bin ich bestrebt, meine Erfahrung in umweltfreundlichen Designlösungen einzubringen.</p>
                            <p>Ich würde mich freuen, die Gelegenheit zu erhalten, zu besprechen, wie meine Fähigkeiten und mein Enthusiasmus zum weiteren Erfolg Ihres Teams beitragen können. Vielen Dank für die Berücksichtigung meiner Bewerbung.</p>
                            <p>Mit freundlichen Grüßen<br>[Ihr Name]</p>
                        </div>
                        <div class="loading-overlay" id="rightLoading">
                            <div class="loading-content">
                                <div class="loading-spinner"></div>
                                <div class="loading-text">Formatting to German standards...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Bar -->
            <div class="action-bar">
                <div class="action-status">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span id="statusText">Ready to edit</span>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="previewLetter()">
                        <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                        </svg>
                        Preview
                    </button>
                    <button class="btn btn-primary" id="downloadBtn" onclick="downloadLetter()" disabled>
                        <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                        </svg>
                        Download PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State management
        let hasUnsyncedChanges = false;
        let currentLeftLang = 'en';
        let currentRightLang = 'de';
        let isSaved = false;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateProgressBar(66);
        });

        // Handle left content changes
        function handleLeftChange() {
            hasUnsyncedChanges = true;
            document.getElementById('syncButton').classList.add('has-changes');
            document.getElementById('syncInstruction').classList.add('visible');
            updateStatus('Unsaved changes - Click sync button to update', false);
            document.getElementById('saveStatus').classList.remove('visible');
        }

        // Sync changes
        function syncChanges() {
            if (!hasUnsyncedChanges) return;

            const syncButton = document.getElementById('syncButton');
            const rightLoading = document.getElementById('rightLoading');
            const syncInstruction = document.getElementById('syncInstruction');
            
            // Show loading
            rightLoading.classList.add('active');
            syncButton.classList.remove('has-changes');
            syncButton.disabled = true;
            syncInstruction.classList.remove('visible');

            // Simulate translation/sync
            setTimeout(() => {
                // Get left content
                const leftContent = document.getElementById('leftContent').innerHTML;
                
                // Transform to German (in real app, this would be API call)
                const rightContent = document.getElementById('rightContent');
                if (currentRightLang === 'de') {
                    // Keep German content as is (would be translated in real app)
                    rightContent.innerHTML = rightContent.innerHTML;
                } else {
                    // If English is selected on right, copy from left
                    rightContent.innerHTML = leftContent;
                }

                // Hide loading
                rightLoading.classList.remove('active');
                syncButton.disabled = false;
                hasUnsyncedChanges = false;

                // Update status
                updateStatus('Changes synced and saved', true);
                document.getElementById('saveStatus').classList.add('visible');
                document.getElementById('downloadBtn').disabled = false;
                updateProgressBar(100);

                // Flash success
                rightContent.style.animation = 'pulse 0.5s ease-out';
                setTimeout(() => {
                    rightContent.style.animation = '';
                }, 500);

            }, 1500);
        }

        // Language selection
        function toggleLeftLanguage() {
            const dropdown = document.getElementById('leftLanguageDropdown');
            dropdown.classList.toggle('active');
        }

        function toggleRightLanguage() {
            const dropdown = document.getElementById('rightLanguageDropdown');
            dropdown.classList.toggle('active');
        }

        function selectLeftLanguage(code, flag, name) {
            currentLeftLang = code;
            document.getElementById('leftLangFlag').textContent = flag;
            document.getElementById('leftLangName').textContent = name;
            document.getElementById('leftLanguageDropdown').classList.remove('active');
            
            // Update selected state
            document.querySelectorAll('#leftLanguageDropdown .language-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.closest('.language-option').classList.add('selected');

            // Show loading and translate
            const leftLoading = document.getElementById('leftLoading');
            leftLoading.classList.add('active');
            
            setTimeout(() => {
                leftLoading.classList.remove('active');
                showNotification(`Content translated to ${name}`, 'success');
            }, 1000);
        }

        function selectRightLanguage(code, flag, name) {
            currentRightLang = code;
            document.getElementById('rightLangFlag').textContent = flag;
            document.getElementById('rightLangName').textContent = name;
            document.getElementById('rightLanguageDropdown').classList.remove('active');
            
            // Update selected state
            document.querySelectorAll('#rightLanguageDropdown .language-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.closest('.language-option').classList.add('selected');

            // Show loading and reformat
            const rightLoading = document.getElementById('rightLoading');
            rightLoading.classList.add('active');
            
            setTimeout(() => {
                rightLoading.classList.remove('active');
                showNotification(`Cover letter formatted to ${name} standards`, 'success');
            }, 1000);
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.language-selector')) {
                document.querySelectorAll('.language-dropdown').forEach(dd => {
                    dd.classList.remove('active');
                });
            }
        });

        // Update status
        function updateStatus(text, saved) {
            const statusText = document.getElementById('statusText');
            const statusIndicator = document.getElementById('statusIndicator');
            
            statusText.textContent = text;
            if (saved) {
                statusIndicator.classList.add('saved');
                isSaved = true;
            } else {
                statusIndicator.classList.remove('saved');
                isSaved = false;
            }
        }

        // Update progress bar
        function updateProgressBar(percentage) {
            const fill = document.querySelector('.progress-line-fill');
            fill.style.width = percentage + '%';
        }

        // Preview letter
        function previewLetter() {
            const content = document.getElementById('rightContent').innerHTML;
            
            // Create modal overlay
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;

            // Create preview container
            const preview = document.createElement('div');
            preview.style.cssText = `
                background: white;
                width: 90%;
                max-width: 800px;
                height: 90%;
                max-height: 900px;
                border-radius: 16px;
                overflow: hidden;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                display: flex;
                flex-direction: column;
                animation: slideUp 0.3s ease-out;
            `;

            // Create preview header
            const header = document.createElement('div');
            header.style.cssText = `
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                padding: 20px 24px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                color: white;
            `;

            header.innerHTML = `
                <div style="display: flex; align-items: center; gap: 12px;">
                    <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                    </svg>
                    <h2 style="font-size: 20px; font-weight: 700; margin: 0;">Cover Letter Preview</h2>
                </div>
                <button onclick="this.closest('.modal-overlay').remove()" style="
                    background: rgba(255, 255, 255, 0.2);
                    border: none;
                    width: 36px;
                    height: 36px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    transition: all 0.2s;
                    color: white;
                    font-size: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">×</button>
            `;

            // Create preview body with A4 paper style
            const body = document.createElement('div');
            body.style.cssText = `
                flex: 1;
                overflow-y: auto;
                background: #f8fafc;
                padding: 24px;
                display: flex;
                justify-content: center;
            `;

            const paper = document.createElement('div');
            paper.style.cssText = `
                background: white;
                width: 100%;
                max-width: 700px;
                min-height: 100%;
                padding: 60px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                font-family: 'Times New Roman', serif;
                font-size: 16px;
                line-height: 1.8;
                color: #000;
            `;

            // Format the content for preview
            let formattedContent = content;
            formattedContent = formattedContent.replace(/<p>/g, '<p style="margin-bottom: 16px;">');
            formattedContent = formattedContent.replace(/<ul>/g, '<ul style="margin: 16px 0; padding-left: 40px;">');
            formattedContent = formattedContent.replace(/<li>/g, '<li style="margin-bottom: 8px;">');

            paper.innerHTML = formattedContent;

            // Create footer with actions
            const footer = document.createElement('div');
            footer.style.cssText = `
                background: white;
                border-top: 1px solid #e2e8f0;
                padding: 16px 24px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            `;

            footer.innerHTML = `
                <div style="color: #64748b; font-size: 14px;">
                    Preview mode - This is how your cover letter will look
                </div>
                <div style="display: flex; gap: 12px;">
                    <button onclick="window.print()" style="
                        padding: 10px 20px;
                        background: white;
                        border: 2px solid #e2e8f0;
                        border-radius: 8px;
                        color: #64748b;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.2s;
                    " onmouseover="this.style.borderColor='#3b82f6'; this.style.color='#3b82f6'" onmouseout="this.style.borderColor='#e2e8f0'; this.style.color='#64748b'">
                        Print
                    </button>
                    <button onclick="this.closest('.modal-overlay').remove()" style="
                        padding: 10px 20px;
                        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                        border: none;
                        border-radius: 8px;
                        color: white;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.2s;
                        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
                    " onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                        Close Preview
                    </button>
                </div>
            `;

            // Assemble preview
            body.appendChild(paper);
            preview.appendChild(header);
            preview.appendChild(body);
            preview.appendChild(footer);
            modal.appendChild(preview);
            modal.classList.add('modal-overlay');

            // Add to page
            document.body.appendChild(modal);

            // Close on background click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });

            // Add print styles
            const printStyles = document.createElement('style');
            printStyles.textContent = `
                @media print {
                    .modal-overlay { display: none !important; }
                    body * { visibility: hidden; }
                    .modal-overlay .paper, .modal-overlay .paper * { visibility: visible; }
                    .modal-overlay .paper { position: absolute; left: 0; top: 0; }
                }
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideUp {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
            `;
            document.head.appendChild(printStyles);
        }

        // Download letter
        function downloadLetter() {
            showNotification('Downloading PDF...', 'info');
            // In real app, this would generate actual PDF
            setTimeout(() => {
                showNotification('Cover letter downloaded successfully!', 'success');
            }, 1500);
        }

        // Show help
        function showHelp() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;

            const helpContent = document.createElement('div');
            helpContent.style.cssText = `
                background: white;
                width: 90%;
                max-width: 600px;
                max-height: 80vh;
                border-radius: 16px;
                overflow: auto;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                animation: slideUp 0.3s ease-out;
            `;

            helpContent.innerHTML = `
                <div style="background: linear-gradient(135deg, #3b82f6, #8b5cf6); padding: 24px; color: white;">
                    <h2 style="font-size: 24px; font-weight: 700; margin: 0;">Cover Letter Editor Help</h2>
                </div>
                <div style="padding: 32px;">
                    <div style="margin-bottom: 24px;">
                        <h3 style="color: #1e293b; font-size: 18px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                            <span style="background: #eff6ff; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #3b82f6; font-weight: 700;">1</span>
                            Edit in Your Language
                        </h3>
                        <p style="color: #64748b; line-height: 1.6; margin-left: 40px;">
                            Use the left panel to edit your cover letter in your preferred language. Choose from 8 languages including English, Spanish, French, and more.
                        </p>
                    </div>
                    
                    <div style="margin-bottom: 24px;">
                        <h3 style="color: #1e293b; font-size: 18px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                            <span style="background: #fef3c7; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #f59e0b; font-weight: 700;">2</span>
                            Click the Sync Button
                        </h3>
                        <p style="color: #64748b; line-height: 1.6; margin-left: 40px;">
                            <strong>Important:</strong> After making changes, click the orange glowing sync button (→) in the middle to transfer your edits to the German version. The button appears when you have unsaved changes.
                        </p>
                    </div>
                    
                    <div style="margin-bottom: 24px;">
                        <h3 style="color: #1e293b; font-size: 18px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                            <span style="background: #eff6ff; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #3b82f6; font-weight: 700;">3</span>
                            Choose Output Format
                        </h3>
                        <p style="color: #64748b; line-height: 1.6; margin-left: 40px;">
                            The right panel can display your cover letter in either German (default) or English format. Use the language selector to switch between them.
                        </p>
                    </div>
                    
                    <div style="margin-bottom: 24px;">
                        <h3 style="color: #1e293b; font-size: 18px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                            <span style="background: #d1fae5; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #10b981; font-weight: 700;">4</span>
                            Preview & Download
                        </h3>
                        <p style="color: #64748b; line-height: 1.6; margin-left: 40px;">
                            Use the Preview button to see how your cover letter will look, then download it as a PDF when you're satisfied with the result.
                        </p>
                    </div>
                    
                    <div style="background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 12px; padding: 16px; margin-top: 24px;">
                        <p style="color: #0c4a6e; font-size: 14px; margin: 0;">
                            <strong>💡 Pro Tip:</strong> The sync button will glow orange and show "Click to sync →" when you have unsaved changes. Don't forget to sync before downloading!
                        </p>
                    </div>
                    
                    <button onclick="this.closest('div').parentElement.remove()" style="
                        width: 100%;
                        margin-top: 24px;
                        padding: 12px 24px;
                        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                        border: none;
                        border-radius: 12px;
                        color: white;
                        font-weight: 600;
                        font-size: 16px;
                        cursor: pointer;
                        transition: all 0.2s;
                        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
                    " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        Got it!
                    </button>
                </div>
            `;

            modal.appendChild(helpContent);
            document.body.appendChild(modal);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 24px;
                right: 24px;
                background: white;
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
                display: flex;
                align-items: center;
                gap: 12px;
                font-size: 14px;
                font-weight: 600;
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
                border-left: 4px solid ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
            `;

            const icon = type === 'success' ? '✓' : type === 'error' ? '✕' : 'ℹ';
            notification.innerHTML = `<span style="color: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'}">${icon}</span> ${message}`;
            
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            @keyframes slideOut {
                from { opacity: 1; transform: translateY(0); }
                to { opacity: 0; transform: translateY(20px); }
            }
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.02); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>